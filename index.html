<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ç‹¼äººæ€è§’è‰²æ ‡è®°å·¥å…·</title>
  <!-- å¼•å…¥å¤–éƒ¨èµ„æº -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- ä¸´æ—¶å›é€€æ ·å¼ï¼šç”¨äºè¯Šæ–­ä¸ºä½• Tailwind/è‡ªå®šä¹‰æ ·å¼æœªç”Ÿæ•ˆï¼ˆé¡µé¢è°ƒè¯•ç”¨ï¼Œå¯éšååˆ é™¤ï¼‰ -->
  <style id="debug-fallback">
    /* å¦‚æœé¡µé¢å®Œå…¨æ— æ ·å¼ï¼Œä¼šçœ‹åˆ°æ·±è‰²èƒŒæ™¯å’Œç™½è‰²æ–‡å­— â€” è¯´æ˜æµè§ˆå™¨èƒ½åº”ç”¨åŸç”ŸCSSï¼Œä½† Tailwind/Special style æœªç”Ÿæ•ˆ */
    html,body { background: #0f1724; color: #e6eef8; }
    h1 { color: #fff; }
    .btn-debug { background: #334155; color: #fff; border-radius: 6px; padding: 6px 10px; }
  </style>

  <style>
    /* When modal is open, prevent background from scrolling and ensure centering */
    body.modal-open {
      overflow: hidden !important;
      height: 100vh !important;
      touch-action: none;
    }
    /* Ensure modal centers when no background scroll present (only on wider screens) */
    @media (min-width: 641px) {
      body.modal-open #roleModal { align-items: center; }
    }
  </style>
  
  <!-- Tailwind é…ç½® -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#6c5ce7',
            secondary: '#a29bfe',
            villager: '#2ecc71',
            seer: '#3498db',
            witch: '#9b59b6',
            hunter: '#f39c12',
            guard: '#1abc9c',
            exorcist: '#ffd700',
            knight: '#27ae60',
            wolf: '#e74c3c',
            wolfKing: '#8b0000',
            wolfBeauty: '#ff1493',
            ghostRider: '#2f4f4f',
            thief: '#8e44ad',
            cupid: '#fd79a8',
            idiot: '#7f8c8d',
            merchant: '#c0a080',
            background: '#1a1a2e'
          },
          fontFamily: {
            inter: ['Inter', 'system-ui', 'sans-serif'],
          },
        },
      }
    }
  </script>
  
  <!-- è‡ªå®šä¹‰å·¥å…·ç±» -->
  <style type="text/tailwindcss">
    @layer utilities {
      .content-auto {
        content-visibility: auto;
      }
      
      /* åŠ¨æ€èƒŒæ™¯ - æ€§èƒ½ä¼˜åŒ–ç‰ˆæœ¬ */
      @keyframes gradientShift {
        0% {
          background-position: 0% 0%;
        }
        25% {
          background-position: 100% 50%;
        }
        50% {
          background-position: 100% 100%;
        }
        75% {
          background-position: 0% 50%;
        }
        100% {
          background-position: 0% 0%;
        }
      }
      
      @keyframes gradientPulse {
        0%, 100% {
          opacity: 0.95;
          filter: brightness(1);
        }
        50% {
          opacity: 1;
          filter: brightness(1.1);
        }
      }
      
      body {
        /* è¡€æœˆé»‘æš—å¤œ + ç™½å¤©ä¹¡é•‡ä¼ªç¥¥å’Œçš„æ··åˆè¿‡æ¸¡ */
        background: linear-gradient(
          135deg,
          #0a0a0f 0%,        /* æ·±é»‘ - è¡€æœˆä¹‹å¤œ */
          #2d0a1a 12%,       /* æš—çº¢ - è¡€æœˆé˜´å½± */
          #1a0f2e 25%,       /* æ·±ç´« - ç¥ç§˜æ„Ÿ */
          #0f1a3c 38%,       /* æ·±è“ - å¤œè‰²æ¸æµ… */
          #1a2a4a 50%,       /* è“ç° - å¤©äº®çš„é¢„å…† */
          #3a2a1a 62%,       /* åœŸé»„ - æ™¨æ›¦ä¹¡é•‡è‰² */
          #4a3a2a 75%,       /* æ£•è‰² - å¤æœ´ä¹¡é•‡ */
          #5a4a3a 88%,       /* æµ…æ£• - ç™½å¤©æ¸©æš– */
          #6a5a4a 100%       /* ç±³è‰² - å¹³å’Œä¼ªç¥¥å’Œ */
        );
        background-size: 200% 200%;
        animation: gradientShift 30s ease-in-out infinite, gradientPulse 8s ease-in-out infinite;
        will-change: background-position, opacity, filter;
        contain: layout style paint;
      }
      
      /* æ€§èƒ½ä¼˜åŒ–ï¼šå‡å°‘é‡æ’ */
      @media (prefers-reduced-motion: reduce) {
        body {
          animation: none;
          background: linear-gradient(to bottom right, #1a1a2e, #0f3460);
        }
      }
      
      @media (max-width: 768px) {
        body {
          animation-duration: 20s;
        }
      }
      
      /* èƒŒæ™¯å…‰æ™•æ•ˆæœ - æä½æˆæœ¬ */
      body::before {
        content: '';
        position: fixed;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: 
          /* è¡€æœˆå…‰æ™• - å·¦ä¸Šæ–¹çº¢è‰²é˜´éƒ */
          radial-gradient(circle at 15% 20%, rgba(180, 20, 40, 0.25) 0%, transparent 40%),
          /* é»‘æš—å¤œå¹• - ä¸­å¿ƒæ·±ç´«è‰² */
          radial-gradient(circle at 50% 50%, rgba(60, 20, 80, 0.15) 0%, transparent 50%),
          /* ä¹¡é•‡æ™¨æ›¦ - å³ä¸‹æ–¹æ¸©æš–æ©™é»„ */
          radial-gradient(circle at 85% 85%, rgba(200, 120, 40, 0.20) 0%, transparent 45%),
          /* ç¥¥å’Œå¤©å…‰ - é¡¶éƒ¨æŸ”å’Œè“ç™½ */
          radial-gradient(circle at 50% 10%, rgba(100, 150, 200, 0.12) 0%, transparent 35%);
        animation: floatGlow 35s ease-in-out infinite;
        pointer-events: none;
        z-index: -1;
        will-change: transform;
      }
      
      @keyframes floatGlow {
        0% {
          transform: translate(0, 0) scale(1);
        }
        25% {
          transform: translate(50px, -40px) scale(1.05);
        }
        50% {
          transform: translate(80px, 30px) scale(1);
        }
        75% {
          transform: translate(-30px, 50px) scale(1.05);
        }
        100% {
          transform: translate(0, 0) scale(1);
        }
      }
      
      @media (prefers-reduced-motion: reduce) {
        body::before {
          animation: none;
        }
      }
      /* ä½æˆæœ¬èƒŒæ™¯ç‹¼æ•ˆæœ */
      .wolf-bg {
        position: fixed;
        right: -8%;
        bottom: -8%;
        width: 60vmin;
        height: 60vmin;
        pointer-events: none;
        opacity: 0.12;
        z-index: -1;
        transform: translate3d(0,0,0);
        will-change: opacity;
        filter: saturate(0.8) contrast(1.1) hue-rotate(10deg) drop-shadow(0 0 40px rgba(180, 20, 40, 0.3));
        transition: opacity 300ms ease;
      }
      .wolf-bg svg {
        width: 100%;
        height: 100%;
        display: block;
      }
      .wolf-bg text { font-family: system-ui, "Segoe UI Emoji", "Noto Color Emoji", serif; }

      .wolf-animate {
        animation: wolfGlow 6s ease-in-out infinite;
      }
      @keyframes wolfFloat {
        0% { transform: translateY(0) rotate(-5deg) scale(1); }
        25% { transform: translateY(-15px) rotate(2deg) scale(1.02); }
        50% { transform: translateY(-25px) rotate(-3deg) scale(1); }
        75% { transform: translateY(-10px) rotate(4deg) scale(1.02); }
        100% { transform: translateY(0) rotate(-5deg) scale(1); }
      }
      @keyframes wolfGlow {
        0%, 100% { filter: saturate(0.8) contrast(1.1) hue-rotate(10deg) drop-shadow(0 0 20px rgba(180, 20, 40, 0.2)); }
        50% { filter: saturate(1) contrast(1.3) hue-rotate(15deg) drop-shadow(0 0 50px rgba(180, 20, 40, 0.4)); }
      }
      
      /* éšè—/ç¦ç”¨æ—¶æ›´çœèµ„æº */
      .wolf-hidden { opacity: 0 !important; pointer-events: none; }
      @media (prefers-reduced-motion: reduce) {
        .wolf-animate { animation: none; }
      }
      /* ä¼˜åŒ–ï¼šå°è¯•å°†åŸç”Ÿä¸‹æ‹‰çš„ä¸‹æ‹‰é¡¹è®¾ä¸ºæ·±è‰²ï¼ˆæµè§ˆå™¨å¯¹ option æ”¯æŒä¸ä¸€è‡´ï¼‰ */
      #playerCount, select {
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
        background: linear-gradient(180deg,#222834,#111827);
        color: #fff;
        border: 1px solid rgba(255,255,255,0.06);
        padding-right: 2.5rem;
      }
      #playerCount option {
        background-color: #0b1220;
        color: #fff;
      }
      select::-ms-expand { display:none; }

      .player-card {
        @apply w-16 h-16 sm:w-20 sm:h-20 md:w-24 md:h-24 rounded-lg sm:rounded-xl flex flex-col items-center justify-center cursor-pointer transition-all duration-300 transform hover:scale-105 shadow-lg relative overflow-hidden;
      }
      /* æ­»äº¡çŠ¶æ€ï¼šæ¡†é¢œè‰²å˜æš—ï¼Œå åŠ "æ­»äº¡"æ–‡å­— */
      .player-card.dead {
        @apply brightness-50 filter drop-shadow-lg;
      }
      .player-card.dead::after {
        content: '';
        @apply absolute inset-0 bg-red-950/40 pointer-events-none;
      }
      .player-card.dead::before {
        content: 'æ­»äº¡';
        @apply absolute inset-0 flex items-center justify-center text-lg md:text-2xl font-black text-red-300 pointer-events-none drop-shadow-md z-10;
      }
      /* æŠ•ç¥¨å‡ºå±€çŠ¶æ€ï¼šæ¡†é¢œè‰²å˜æš—ï¼Œå åŠ "æŠ•ç¥¨"æ–‡å­—ï¼ˆæ­»äº¡çŠ¶æ€ä¼˜å…ˆï¼‰ */
      .player-card.vote-out:not(.dead) {
        @apply brightness-50 filter drop-shadow-lg;
      }
      .player-card.vote-out:not(.dead)::after {
        content: '';
        @apply absolute inset-0 bg-blue-950/40 pointer-events-none;
      }
      .player-card.vote-out:not(.dead)::before {
        content: 'æŠ•ç¥¨';
        @apply absolute inset-0 flex items-center justify-center text-lg md:text-2xl font-black text-blue-300 pointer-events-none drop-shadow-md z-10;
      }
      .player-card.locked {
        @apply ring-2 ring-yellow-400 ring-offset-2 ring-offset-background;
      }
      .player-number {
        @apply text-lg sm:text-2xl md:text-3xl font-bold mb-0.5 sm:mb-1;
      }
      .player-role {
        @apply text-xs sm:text-xs md:text-sm font-medium truncate w-full text-center;
      }
      .role-option {
        @apply flex items-center p-2 rounded-md cursor-pointer hover:bg-gray-700 transition-colors duration-200;
      }
      .role-option:hover {
        background: linear-gradient(90deg, rgba(108, 92, 231, 0.2), rgba(52, 152, 219, 0.1));
      }
      .role-option span:first-child {
        @apply text-xl leading-none;
      }
      .role-color-indicator {
        @apply w-3 h-3 rounded-full mr-2;
      }
      .status-icon {
        @apply absolute top-1 right-1 w-5 h-5 flex items-center justify-center rounded-full text-xs opacity-80;
      }
      
      /* éšè—è§’è‰²ä¿¡æ¯ */
      .hide-roles .player-card {
        background-color: #4b5563 !important;
        background-image: none !important;
      }
      
      .hide-roles .player-role {
        opacity: 0;
        pointer-events: none;
      }
      
      /* å¢å¼ºçš„å¡ç‰‡æ ·å¼ */
      .glass-card {
        background: rgba(30, 30, 46, 0.7);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      }
      
      /* æŒ‰é’®å¢å¼º */
      .btn-enhanced {
        position: relative;
        overflow: hidden;
        transition: all 0.3s ease;
      }
      
      .btn-enhanced::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
        transition: left 0.5s ease;
      }
      
      .btn-enhanced:hover::before {
        left: 100%;
      }
      
      /* æ ‡é¢˜å…‰æ™•æ•ˆæœ */
      header {
        position: relative;
        z-index: 1;
      }

      /* éšè—è§’è‰²æŒ‰é”®activeçŠ¶æ€ï¼ˆé¡¶å±‚æ ·å¼ï¼Œè¦†ç›– Tailwind ç±»ï¼‰ */
      #toggleRolesBtn {
        background: linear-gradient(to right, #4b5563, #3f4a57) !important;
        transition: all 0.3s ease;
      }

      #toggleRolesBtn.active {
        background: linear-gradient(to right, #7c3aed, #6d28d9) !important;
      }

      #toggleRolesBtn.active:hover {
        background: linear-gradient(to right, #6d28d9, #5b21b6) !important;
      }
    }
  </style>
</head>

<body class="min-h-screen font-inter text-white p-4 md:p-8">
  <!-- ä½æˆæœ¬èƒŒæ™¯ç‹¼å…ƒç´ ï¼ˆå¯åˆ‡æ¢ï¼‰ -->
  <div id="wolfBg" class="wolf-bg" aria-hidden="true">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200" preserveAspectRatio="xMidYMid meet">
      <text x="50%" y="55%" text-anchor="middle" dominant-baseline="middle" font-size="140">ğŸº</text>
    </svg>
  </div>
  <!-- é¡µé¢æ ‡é¢˜ -->
  <header class="text-center mb-8">
    <h1 class="text-[clamp(1.8rem,5vw,2.8rem)] font-bold text-transparent bg-clip-text bg-gradient-to-r from-primary to-secondary">ç‹¼äººæ€è§’è‰²æ ‡è®°å·¥å…·</h1>
    <p class="text-gray-400 mt-2">ç‚¹å‡»ç©å®¶ä½ç½®ä¸ºå…¶åˆ†é…ä½ æ¨æ–­çš„è§’è‰²</p>
  </header>

  <!-- æ§åˆ¶é¢æ¿ -->
  <div class="flex flex-wrap items-center justify-between gap-2 md:gap-4 mb-8 max-w-6xl mx-auto px-2">
    <div class="flex items-center gap-2 md:gap-3 flex-wrap w-full md:w-auto">
      <button id="resetBtn" class="btn-enhanced flex items-center gap-1 md:gap-2 bg-gradient-to-r from-gray-700 to-gray-600 hover:from-gray-600 hover:to-gray-500 px-2 md:px-4 py-2 rounded-lg transition-all duration-200 shadow-lg text-sm md:text-base">
        <i class="fas fa-redo text-sm md:text-base"></i>
        <span class="hidden sm:inline">é‡ç½®æ‰€æœ‰</span>
        <span class="sm:hidden">é‡ç½®</span>
      </button>
      <button id="clearBtn" class="btn-enhanced flex items-center gap-1 md:gap-2 bg-gradient-to-r from-gray-700 to-gray-600 hover:from-gray-600 hover:to-gray-500 px-2 md:px-4 py-2 rounded-lg transition-all duration-200 shadow-lg text-sm md:text-base">
        <i class="fas fa-eraser text-sm md:text-base"></i>
        <span class="hidden sm:inline">æ¸…é™¤æ ‡è®°</span>
        <span class="sm:hidden">æ¸…é™¤</span>
      </button>
      <button id="toggleRolesBtn" class="btn-enhanced flex items-center gap-1 md:gap-2 bg-gradient-to-r from-gray-700 to-gray-600 hover:from-gray-600 hover:to-gray-500 px-2 md:px-4 py-2 rounded-lg transition-all duration-200 shadow-lg text-sm md:text-base" title="æ˜¾ç¤º/éšè—è§’è‰²ä¿¡æ¯">
        <i class="fas fa-eye text-sm md:text-base"></i>
        <span id="toggleRolesText" class="hidden sm:inline">éšè—è§’è‰²</span>
        <span id="toggleRolesText-short" class="sm:hidden text-xs">éšè—</span>
      </button>
    </div>
    
    <div class="flex items-center gap-2 md:gap-3 w-full md:w-auto">
      <label for="playerCount" class="text-gray-300 font-medium text-sm md:text-base whitespace-nowrap">ç©å®¶:</label>
      <select id="playerCount" class="bg-gradient-to-r from-gray-800 to-gray-700 border border-gray-600 text-white rounded-lg px-2 md:px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary hover:border-gray-500 transition-all duration-200 shadow-md text-sm md:text-base flex-1 md:flex-auto">
        <option value="6">6äºº</option>
        <option value="7">7äºº</option>
        <option value="8">8äºº</option>
        <option value="9" selected>9äºº</option>
        <option value="10">10äºº</option>
        <option value="11">11äºº</option>
        <option value="12">12äºº</option>
        <option value="15">15äºº</option>
      </select>
    </div>
  </div>

  <!-- ç©å®¶åŒºåŸŸ -->
  <div id="playersContainer" class="grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-2 sm:gap-3 md:gap-4 lg:gap-6 max-w-6xl mx-auto mb-12 px-2 justify-items-center">
    <!-- ç©å®¶å¡ç‰‡å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
  </div>

  <!-- è§’è‰²è¯´æ˜ -->
  <div class="glass-card max-w-6xl mx-auto rounded-2xl p-4 md:p-8 mb-8 mx-2">
    <h2 class="text-xl md:text-2xl font-bold mb-6 md:mb-8 text-center bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">è§’è‰²ä¸çŠ¶æ€è¯´æ˜</h2>
    
    <!-- è§’è‰²åˆ†ç±»å±•ç¤º -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-8 mb-6 md:mb-8">
      <!-- ç¥èŒé˜µè¥ -->
      <div class="border border-gray-600 rounded-lg p-3 md:p-4">
        <h3 class="text-base md:text-lg font-bold mb-2 md:mb-3 text-blue-400 flex items-center gap-2">
          <i class="fas fa-book text-blue-400 text-sm md:text-base"></i>
          <span class="text-sm md:text-base">ç¥èŒé˜µè¥</span>
        </h3>
        <div id="priestlyRoles" class="space-y-1 md:space-y-2">
          <!-- åŠ¨æ€ç”Ÿæˆ -->
        </div>
      </div>
      
      <!-- ç‹¼æ—é˜µè¥ -->
      <div class="border border-gray-600 rounded-lg p-3 md:p-4">
        <h3 class="text-base md:text-lg font-bold mb-2 md:mb-3 text-red-400 flex items-center gap-2">
          <i class="fas fa-moon-o text-red-400 text-sm md:text-base"></i>
          <span class="text-sm md:text-base">ç‹¼æ—é˜µè¥</span>
        </h3>
        <div id="wolfRoles" class="space-y-1 md:space-y-2">
          <!-- åŠ¨æ€ç”Ÿæˆ -->
        </div>
      </div>
      
      <!-- ç¬¬ä¸‰é˜µè¥ -->
      <div class="border border-gray-600 rounded-lg p-3 md:p-4">
        <h3 class="text-base md:text-lg font-bold mb-2 md:mb-3 text-purple-400 flex items-center gap-2">
          <i class="fas fa-hat-wizard text-purple-400 text-sm md:text-base"></i>
          <span class="text-sm md:text-base">ç¬¬ä¸‰é˜µè¥</span>
        </h3>
        <div id="thirdRoles" class="space-y-1 md:space-y-2">
          <!-- åŠ¨æ€ç”Ÿæˆ -->
        </div>
      </div>
      
      <!-- åŸºç¡€è§’è‰² -->
      <div class="border border-gray-600 rounded-lg p-3 md:p-4">
        <h3 class="text-base md:text-lg font-bold mb-2 md:mb-3 text-green-400 flex items-center gap-2">
          <i class="fas fa-users text-green-400 text-sm md:text-base"></i>
          <span class="text-sm md:text-base">åŸºç¡€è§’è‰²</span>
        </h3>
        <div id="basicRoles" class="space-y-1 md:space-y-2">
          <!-- åŠ¨æ€ç”Ÿæˆ -->
        </div>
      </div>
    </div>
    
    <!-- çŠ¶æ€æ ‡è¯† -->
    <div class="border border-gray-600 rounded-lg p-3 md:p-4 bg-gray-800/30">
      <h3 class="text-base md:text-lg font-bold mb-3 md:mb-4 text-yellow-400 flex items-center gap-2">
        <i class="fas fa-info-circle text-yellow-400 text-sm md:text-base"></i>
        <span class="text-sm md:text-base">çŠ¶æ€æ ‡è¯†</span>
      </h3>
      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 md:gap-4">
        <div class="flex items-start gap-2 md:gap-3">
          <div class="flex-shrink-0 mt-0.5">
            <i class="fas fa-lock text-yellow-400 text-sm md:text-base"></i>
          </div>
          <div class="min-w-0">
            <div class="font-semibold text-yellow-400 text-sm md:text-base">å·²é”å®š</div>
            <div class="text-xs md:text-sm text-gray-400">è§’è‰²å·²ç¡®è®¤ï¼Œæ— æ³•ä¿®æ”¹</div>
          </div>
        </div>
        <div class="flex items-start gap-2 md:gap-3">
          <div class="flex-shrink-0 mt-0.5">
            <div class="w-5 h-5 md:w-6 md:h-6 bg-red-500/50 rounded border-2 border-red-300 flex items-center justify-center text-red-300 text-xs font-bold">æ­»</div>
          </div>
          <div class="min-w-0">
            <div class="font-semibold text-red-400 text-sm md:text-base">å·²æ­»äº¡</div>
            <div class="text-xs md:text-sm text-gray-400">å¡ç‰‡å˜æš—ï¼Œæ˜¾ç¤ºæ­»äº¡çŠ¶æ€</div>
          </div>
        </div>
        <div class="flex items-start gap-2 md:gap-3">
          <div class="flex-shrink-0 mt-0.5">
            <div class="w-5 h-5 md:w-6 md:h-6 bg-blue-500/50 rounded border-2 border-blue-300 flex items-center justify-center text-blue-300 text-xs font-bold">æŠ•</div>
          </div>
          <div class="min-w-0">
            <div class="font-semibold text-blue-400 text-sm md:text-base">è¢«æŠ•ç¥¨å‡ºå±€</div>
            <div class="text-xs md:text-sm text-gray-400">å¡ç‰‡å˜æš—ï¼Œæ˜¾ç¤ºæŠ•ç¥¨å‡ºå±€</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- è§’è‰²é€‰æ‹©æ¨¡æ€æ¡† -->
  <div id="roleModal" class="fixed inset-0 bg-black/70 backdrop-blur-md flex items-center justify-center z-50 hidden opacity-0 transition-opacity duration-300">
    <div class="glass-card rounded-2xl w-full max-w-md max-h-[80vh] overflow-y-auto transform scale-95 transition-transform duration-300">
      <div class="p-6 border-b border-gray-600 flex justify-between items-center bg-gradient-to-r from-gray-800/50 to-transparent">
        <h3 class="text-lg font-bold text-transparent bg-clip-text bg-gradient-to-r from-primary to-secondary">ç©å®¶ <span id="modalPlayerNumber">1</span> æ“ä½œ</h3>
        <button id="closeModal" class="text-gray-400 hover:text-white transition-colors">
          <i class="fas fa-times text-xl"></i>
        </button>
      </div>
      <div class="p-6 space-y-4">
        <div>
          <h4 class="text-sm font-semibold text-gray-200 mb-3 uppercase tracking-wider">é€‰æ‹©è§’è‰²</h4>
          <div id="rolesList" class="space-y-1 max-h-64 overflow-y-auto">
            <!-- è§’è‰²é€‰é¡¹å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
          </div>
        </div>
        
        <div class="border-t border-gray-600 pt-4">
          <h4 class="text-sm font-semibold text-gray-200 mb-3 uppercase tracking-wider">çŠ¶æ€æ“ä½œ</h4>
          <div class="space-y-2">
            <div class="role-option" id="lockOption">
              <i class="fas fa-lock mr-2 text-yellow-400"></i>
              <span>é”å®š/è§£é”è§’è‰²</span>
            </div>
            <div class="role-option" id="deathOption">
              <i class="fas fa-skull mr-2 text-red-400"></i>
              <span>æ ‡è®°/å–æ¶ˆæ­»äº¡</span>
            </div>
            <div class="role-option" id="voteOutOption">
              <i class="fas fa-thumbs-down mr-2 text-blue-400"></i>
              <span>æ ‡è®°/å–æ¶ˆè¢«æŠ•ç¥¨å‡ºå±€</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <style>
    /* Responsive modal tweak: on small screens present as a bottom sheet that fits viewport */
    @media (max-width: 640px) {
      #roleModal {
        align-items: flex-end; /* anchor to bottom */
        padding: 0.5rem; /* allow safe-area spacing */
      }

      #roleModal > .glass-card {
        border-radius: 0.75rem 0.75rem 0 0; /* rounded top only */
        width: 100%;
        max-width: 100%;
        max-height: calc(100vh - 3.5rem); /* leave room for status bar / close button */
        margin: 0;
        transform: translateY(0) !important;
        overflow: hidden; /* inner scroll handled by rolesList */
      }

      /* make the inner scroll area taller on small screens */
      #rolesList {
        max-height: calc(40vh);
      }

      /* reduce padding inside modal for mobile */
      #roleModal .p-6 { padding: 0.75rem; }
      #roleModal .p-6.border-b { padding: 0.5rem 0.75rem; }
    }
  </style>

  <script>
    /**
     * ========== é…ç½®ç®¡ç†ç³»ç»Ÿ ==========
     * æ‰€æœ‰é¢œè‰²ã€è§’è‰²å’ŒçŠ¶æ€éƒ½åœ¨è¿™é‡Œé›†ä¸­ç®¡ç†ï¼Œæ–¹ä¾¿åç»­ä¿®æ”¹
     */

    // é¢œè‰²é…ç½®
    const colorConfig = {
      // Tailwind é¢œè‰²ç±»åæ˜ å°„ï¼ˆç”¨äºCSSç±»åï¼‰
      classes: {
        unknown: 'bg-gray-600',
        villager: 'bg-villager',
        seer: 'bg-seer',
        witch: 'bg-witch',
        hunter: 'bg-hunter',
        guard: 'bg-guard',
        exorcist: 'bg-exorcist',
        knight: 'bg-knight',
        wolf: 'bg-wolf',
        wolfKing: 'bg-wolfKing',
        wolfBeauty: 'bg-wolfBeauty',
        ghostRider: 'bg-ghostRider',
        thief: 'bg-thief',
        cupid: 'bg-cupid',
        idiot: 'bg-idiot',
        merchant: 'bg-merchant'
      },
      // çŠ¶æ€é¢œè‰²é…ç½®
      status: {
        lock: { bgClass: 'bg-yellow-400/20', textClass: 'text-yellow-400', icon: 'fa-lock' },
        death: { bgClass: 'bg-red-500/20', textClass: 'text-red-500', icon: 'fa-skull' },
        voteOut: { bgClass: 'bg-blue-500/20', textClass: 'text-blue-400', icon: 'fa-thumbs-down' }
      }
    };

    // è§’è‰²é…ç½®
    const roleConfig = {
      roles: [
        { id: 'unknown', name: 'æœªç¡®å®š', icon: 'fa-question', colorKey: 'unknown' },
        { id: 'villager', name: 'å¹³æ°‘', icon: 'fa-user', colorKey: 'villager' },
        // ç¥èŒé˜µè¥
        { id: 'seer', name: 'é¢„è¨€å®¶', icon: 'fa-eye', colorKey: 'seer' },
        { id: 'witch', name: 'å¥³å·«', icon: 'fa-flask', colorKey: 'witch' },
        { id: 'hunter', name: 'çŒäºº', icon: 'fa-crosshairs', colorKey: 'hunter' },
        { id: 'guard', name: 'å®ˆå«', icon: 'fa-shield', colorKey: 'guard' },
        { id: 'exorcist', name: 'é©±é­”äºº', icon: 'fa-cross', colorKey: 'exorcist' },
        { id: 'knight', name: 'éª‘å£«', icon: 'fa-horse', colorKey: 'knight' },
        // ç‹¼æ—é˜µè¥
        { id: 'wolf', name: 'ç‹¼äºº', icon: 'fa-moon-o', colorKey: 'wolf' },
        { id: 'wolfKing', name: 'ç‹¼ç‹', icon: 'fa-crown', colorKey: 'wolfKing' },
        { id: 'wolfBeauty', name: 'ç‹¼ç¾äºº', icon: 'fa-heart', colorKey: 'wolfBeauty' },
        { id: 'ghostRider', name: 'æ¶çµéª‘å£«', icon: 'fa-motorcycle', colorKey: 'ghostRider' },
        // ç¬¬ä¸‰é˜µè¥
        { id: 'thief', name: 'ç›—è´¼', icon: 'fa-hand-paper-o', colorKey: 'thief' },
        { id: 'cupid', name: 'ä¸˜æ¯”ç‰¹', icon: 'fa-heart', colorKey: 'cupid' },
        { id: 'idiot', name: 'ç™½ç—´', icon: 'fa-meh-o', colorKey: 'idiot' },
        { id: 'merchant', name: 'å•†äºº', icon: 'fa-briefcase', colorKey: 'merchant' }
      ],
      // è·å–è§’è‰²çš„å®Œæ•´ä¿¡æ¯
      getRole: function(roleId) {
        return this.roles.find(r => r.id === roleId);
      },
      // è·å–è§’è‰²é¢œè‰²ç±»å
      getRoleColor: function(roleId) {
        const role = this.getRole(roleId);
        return role ? colorConfig.classes[role.colorKey] : colorConfig.classes.unknown;
      },
      // è·å–æ‰€æœ‰è§’è‰²
      getAllRoles: function() {
        return this.roles;
      }
    };

    // çŠ¶æ€é…ç½®
    const statusConfig = {
      // è·å–çŠ¶æ€çš„é¢œè‰²é…ç½®
      getLockConfig: function() {
        return colorConfig.status.lock;
      },
      getDeathConfig: function() {
        return colorConfig.status.death;
      },
      getVoteOutConfig: function() {
        return colorConfig.status.voteOut;
      }
    };

    // ä¸ºäº†å‘åå…¼å®¹ï¼Œåˆ›å»º roles æ•°ç»„
    const roles = roleConfig.roles.map(role => ({
      id: role.id,
      name: role.name,
      color: colorConfig.classes[role.colorKey],
      icon: role.icon
    }));

    // å½“å‰é€‰ä¸­çš„ç©å®¶ç´¢å¼•
    let selectedPlayerIndex = -1;
    
    // åˆå§‹åŒ–ç©å®¶
    function initPlayers(count = 9) {
      const container = document.getElementById('playersContainer');
      container.innerHTML = '';
      
      const unknownColorClass = roleConfig.getRoleColor('unknown');
      const borderClass = unknownColorClass.replace('bg-', 'border-');
      
      for (let i = 1; i <= count; i++) {
        const playerCard = document.createElement('div');
        playerCard.className = `player-card ${unknownColorClass} border-2 border-opacity-50 ${borderClass}`;
        playerCard.dataset.index = i - 1;
        playerCard.dataset.role = 'unknown';
        playerCard.dataset.locked = 'false';
        playerCard.dataset.dead = 'false';
        playerCard.dataset.voteOut = 'false';
        
        const unknownRole = roleConfig.getRole('unknown');
        playerCard.innerHTML = `
          <div class="player-number">${i}</div>
          <div class="player-role">${unknownRole.name}</div>
          <div class="status-icons"></div>
        `;
        
        playerCard.addEventListener('click', () => openRoleModal(i - 1));
        container.appendChild(playerCard);
      }
      
      // æ›´æ–°è§’è‰²è¯´æ˜
      updateRoleLegend();
    }
    
    // æ›´æ–°è§’è‰²è¯´æ˜
    function updateRoleLegend() {
      // æŒ‰é˜µè¥åˆ†ç±»è§’è‰²
      const priestlyRoles = ['seer', 'witch', 'hunter', 'guard', 'exorcist', 'knight'];
      const wolfRoles = ['wolf', 'wolfKing', 'wolfBeauty', 'ghostRider'];
      const thirdRoles = ['thief', 'cupid', 'idiot', 'merchant'];
      const basicRoles = ['unknown', 'villager'];
      
      const renderRoles = (roles, containerId) => {
        const container = document.getElementById(containerId);
        if (!container) return;
        container.innerHTML = '';
        
        roles.forEach(roleId => {
          const roleData = roleConfig.getRole(roleId);
          if (roleData) {
            const colorClass = colorConfig.classes[roleData.colorKey];
            const item = document.createElement('div');
            item.className = 'flex items-center justify-between text-sm p-2 rounded hover:bg-gray-700/30 transition-colors';
            item.innerHTML = `
              <div class="flex items-center gap-2">
                <span class="role-color-indicator ${colorClass}"></span>
                <span>${roleData.name}</span>
              </div>
              <i class="fa ${roleData.icon} text-gray-500 text-sm"></i>
            `;
            container.appendChild(item);
          }
        });
      };
      
      renderRoles(priestlyRoles, 'priestlyRoles');
      renderRoles(wolfRoles, 'wolfRoles');
      renderRoles(thirdRoles, 'thirdRoles');
      renderRoles(basicRoles, 'basicRoles');
    }
    
    // æ›´æ–°ç©å®¶çŠ¶æ€å›¾æ ‡ï¼ˆä»…æ˜¾ç¤ºé”å®šçŠ¶æ€ï¼‰
    function updateStatusIcons(playerCard) {
      const iconsContainer = playerCard.querySelector('.status-icons');
      iconsContainer.innerHTML = '';
      
      // åªæ˜¾ç¤ºé”å®šå›¾æ ‡
      if (playerCard.dataset.locked === 'true') {
        const lockConfig = colorConfig.status.lock;
        const lockIcon = document.createElement('div');
        lockIcon.className = `status-icon ${lockConfig.bgClass} ${lockConfig.textClass}`;
        lockIcon.innerHTML = `<i class="fa ${lockConfig.icon}"></i>`;
        iconsContainer.appendChild(lockIcon);
      }
    }
    
    // æ‰“å¼€è§’è‰²é€‰æ‹©æ¨¡æ€æ¡†
    function openRoleModal(index) {
      selectedPlayerIndex = index;
      const modal = document.getElementById('roleModal');
      const rolesList = document.getElementById('rolesList');
      const playerCards = document.querySelectorAll('.player-card');
      const playerCard = playerCards[index];
      
      // æ›´æ–°æ¨¡æ€æ¡†æ ‡é¢˜ä¸­çš„ç©å®¶ç¼–å·
      document.getElementById('modalPlayerNumber').textContent = index + 1;
      
      // æ¸…ç©ºå¹¶ç”Ÿæˆè§’è‰²åˆ—è¡¨
      rolesList.innerHTML = '';
      roleConfig.getAllRoles().forEach(roleData => {
        const roleItem = document.createElement('div');
        const colorClass = colorConfig.classes[roleData.colorKey];
        roleItem.className = `role-option ${playerCard.dataset.role === roleData.id ? 'bg-gray-700' : ''}`;
        roleItem.dataset.role = roleData.id;
        roleItem.disabled = playerCard.dataset.locked === 'true';
        if (playerCard.dataset.locked === 'true') {
          roleItem.classList.add('opacity-50', 'cursor-not-allowed');
        }
        
        roleItem.innerHTML = `
          <span class="role-color-indicator ${colorClass}"></span>
          <span>${roleData.name}</span>
          <i class="fa ${roleData.icon} ml-auto text-gray-400"></i>
        `;
        
        if (playerCard.dataset.locked === 'false') {
          roleItem.addEventListener('click', () => selectRole(roleData.id));
        }
        rolesList.appendChild(roleItem);
      });
      
      // æ›´æ–°çŠ¶æ€æ“ä½œé€‰é¡¹çš„æ–‡æœ¬ï¼ˆä»é…ç½®åŠ¨æ€ç”Ÿæˆï¼‰
      const lockConfig = statusConfig.getLockConfig();
      const deathConfig = statusConfig.getDeathConfig();
      const voteOutConfig = statusConfig.getVoteOutConfig();
      
      document.getElementById('lockOption').querySelector('span').textContent = 
        playerCard.dataset.locked === 'true' ? 'è§£é”è§’è‰²' : 'é”å®šè§’è‰²';
      
      document.getElementById('deathOption').querySelector('span').textContent = 
        playerCard.dataset.dead === 'true' ? 'å–æ¶ˆæ­»äº¡æ ‡è®°' : 'æ ‡è®°æ­»äº¡';
      
      document.getElementById('voteOutOption').querySelector('span').textContent = 
        playerCard.dataset.voteOut === 'true' ? 'å–æ¶ˆè¢«æŠ•ç¥¨å‡ºå±€' : 'æ ‡è®°è¢«æŠ•ç¥¨å‡ºå±€';
      
      // æ˜¾ç¤ºæ¨¡æ€æ¡†å¹¶æ·»åŠ åŠ¨ç”»
      modal.classList.remove('hidden');
      // lock background scroll (rely on CSS `overflow:hidden`), avoid changing body top
      document.body.classList.add('modal-open');
      // è®¡ç®—æ»šåŠ¨æ¡å®½åº¦å¹¶è¡¥å¿ body å³ä¾§å†…è¾¹è·ï¼Œé˜²æ­¢ fixed å…ƒç´ è·³åŠ¨
      const scrollbarWidth = window.innerWidth - document.documentElement.clientWidth;
      if (scrollbarWidth > 0) {
        document.body.style.paddingRight = scrollbarWidth + 'px';
      }

      setTimeout(() => {
        modal.classList.add('opacity-100');
        modal.querySelector('div').classList.remove('scale-95');
        modal.querySelector('div').classList.add('scale-100');
        // on small screens ensure modal is visible by scrolling modal into view
        if (window.innerWidth <= 640) {
          // force browser to bring fixed modal into viewport
          modal.scrollIntoView({ behavior: 'auto', block: 'end' });
        }
      }, 10);
    }
    
    // å…³é—­è§’è‰²é€‰æ‹©æ¨¡æ€æ¡†
    function closeRoleModal() {
      const modal = document.getElementById('roleModal');
      modal.classList.remove('opacity-100');
      modal.querySelector('div').classList.remove('scale-100');
      modal.querySelector('div').classList.add('scale-95');
      
      setTimeout(() => {
        modal.classList.add('hidden');
        // restore background scroll
        document.body.classList.remove('modal-open');
        document.body.style.paddingRight = '';
        selectedPlayerIndex = -1;
      }, 300);
    }
    
    // é€‰æ‹©è§’è‰²
    function selectRole(roleId) {
      if (selectedPlayerIndex === -1) return;
      
      const playerCards = document.querySelectorAll('.player-card');
      const playerCard = playerCards[selectedPlayerIndex];
      
      // å¦‚æœè§’è‰²å·²é”å®šï¼Œåˆ™ä¸èƒ½æ›´æ”¹
      if (playerCard.dataset.locked === 'true') return;
      
      const roleData = roleConfig.getRole(roleId);
      const colorClass = roleConfig.getRoleColor(roleId);
      
      // æ›´æ–°ç©å®¶å¡ç‰‡
      playerCard.dataset.role = roleId;
      const borderClass = colorClass.replace('bg-', 'border-');
      const classes = ['player-card', colorClass, 'border-2', 'border-opacity-50', borderClass, 'transform', 'transition-all', 'duration-300'];
      if (playerCard.dataset.dead === 'true') classes.push('dead');
      if (playerCard.dataset.voteOut === 'true') classes.push('vote-out');
      if (playerCard.dataset.locked === 'true') classes.push('locked');
      playerCard.className = classes.join(' ');
      
      // æ·»åŠ çŸ­æš‚çš„é«˜äº®æ•ˆæœ
      playerCard.classList.add('scale-110');
      setTimeout(() => {
        playerCard.classList.remove('scale-110');
      }, 300);
      
      // æ›´æ–°è§’è‰²æ–‡æœ¬
      playerCard.querySelector('.player-role').textContent = roleData.name;
      
      // æ›´æ–°çŠ¶æ€å›¾æ ‡
      updateStatusIcons(playerCard);
      
      closeRoleModal();
    }
    
    // åˆ‡æ¢é”å®šçŠ¶æ€
    function toggleLock() {
      if (selectedPlayerIndex === -1) return;
      
      const playerCards = document.querySelectorAll('.player-card');
      const playerCard = playerCards[selectedPlayerIndex];
      const isLocked = playerCard.dataset.locked === 'true';
      
      playerCard.dataset.locked = !isLocked;
      if (!isLocked) {
        playerCard.classList.add('locked');
      } else {
        playerCard.classList.remove('locked');
      }
      
      // æ›´æ–°çŠ¶æ€å›¾æ ‡
      updateStatusIcons(playerCard);
      
      // é‡æ–°æ‰“å¼€æ¨¡æ€æ¡†ä»¥æ›´æ–°é€‰é¡¹çŠ¶æ€
      openRoleModal(selectedPlayerIndex);
    }
    
    // åˆ‡æ¢æ­»äº¡çŠ¶æ€
    function toggleDeath() {
      if (selectedPlayerIndex === -1) return;
      
      const playerCards = document.querySelectorAll('.player-card');
      const playerCard = playerCards[selectedPlayerIndex];
      const isDead = playerCard.dataset.dead === 'true';
      
      playerCard.dataset.dead = !isDead;
      if (!isDead) {
        playerCard.classList.add('dead');
      } else {
        playerCard.classList.remove('dead');
      }
      
      // æ›´æ–°çŠ¶æ€å›¾æ ‡
      updateStatusIcons(playerCard);
      
      // é‡æ–°æ‰“å¼€æ¨¡æ€æ¡†ä»¥æ›´æ–°é€‰é¡¹æ–‡æœ¬
      openRoleModal(selectedPlayerIndex);
    }
    
    // åˆ‡æ¢è¢«æŠ•ç¥¨å‡ºå±€çŠ¶æ€
    function toggleVoteOut() {
      if (selectedPlayerIndex === -1) return;
      
      const playerCards = document.querySelectorAll('.player-card');
      const playerCard = playerCards[selectedPlayerIndex];
      const isVoteOut = playerCard.dataset.voteOut === 'true';
      
      playerCard.dataset.voteOut = !isVoteOut;
      if (!isVoteOut) {
        playerCard.classList.add('vote-out');
      } else {
        playerCard.classList.remove('vote-out');
      }
      
      // é‡æ–°æ‰“å¼€æ¨¡æ€æ¡†ä»¥æ›´æ–°é€‰é¡¹æ–‡æœ¬
      openRoleModal(selectedPlayerIndex);
    }
    
    // é‡ç½®æ‰€æœ‰ç©å®¶
    function resetAllPlayers() {
      const playerCount = document.getElementById('playerCount').value;
      initPlayers(playerCount);
    }
    
    // æ¸…é™¤æ‰€æœ‰æ ‡è®°ï¼ˆé‡ç½®ä¸ºæœªç¡®å®šï¼ŒåŒæ—¶æ¸…é™¤çŠ¶æ€ï¼Œä½†å°Šé‡è§’è‰²é”å®šï¼‰
    function clearAllMarks() {
      const playerCards = document.querySelectorAll('.player-card');
      playerCards.forEach(card => {
        // å¦‚æœè§’è‰²å·²é”å®šï¼Œåˆ™è·³è¿‡
        if (card.dataset.locked === 'true') return;
        
        const colorClass = roleConfig.getRoleColor('unknown');
        const borderClass = colorClass.replace('bg-', 'border-');
        
        card.dataset.role = 'unknown';
        card.dataset.dead = 'false';
        card.dataset.voteOut = 'false';
        
        card.className = `player-card ${colorClass} border-2 border-opacity-50 ${borderClass} transform transition-all duration-300`;
        const roleData = roleConfig.getRole('unknown');
        card.querySelector('.player-role').textContent = roleData.name;
        
        // æ›´æ–°çŠ¶æ€å›¾æ ‡
        updateStatusIcons(card);
      });
    }
    
    // äº‹ä»¶ç›‘å¬
    document.addEventListener('DOMContentLoaded', () => {
      // åˆå§‹åŒ–ç©å®¶
      initPlayers();
      
      // ç©å®¶æ•°é‡å˜åŒ–
      document.getElementById('playerCount').addEventListener('change', (e) => {
        initPlayers(parseInt(e.target.value));
      });
      
      // å…³é—­æ¨¡æ€æ¡†
      document.getElementById('closeModal').addEventListener('click', closeRoleModal);
      
      // ç‚¹å‡»æ¨¡æ€æ¡†èƒŒæ™¯å…³é—­
      document.getElementById('roleModal').addEventListener('click', (e) => {
        if (e.target === document.getElementById('roleModal')) {
          closeRoleModal();
        }
      });
      
      // é”å®š/è§£é”é€‰é¡¹
      document.getElementById('lockOption').addEventListener('click', toggleLock);
      
      // æ­»äº¡æ ‡è®°é€‰é¡¹
      document.getElementById('deathOption').addEventListener('click', toggleDeath);
      
      // è¢«æŠ•ç¥¨å‡ºå±€é€‰é¡¹
      document.getElementById('voteOutOption').addEventListener('click', toggleVoteOut);
      
      // é‡ç½®æŒ‰é’®
      document.getElementById('resetBtn').addEventListener('click', resetAllPlayers);
      
      // æ¸…é™¤æŒ‰é’®
      document.getElementById('clearBtn').addEventListener('click', clearAllMarks);
      
      // æŒ‰ESCå…³é—­æ¨¡æ€æ¡†
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && !document.getElementById('roleModal').classList.contains('hidden')) {
          closeRoleModal();
        }
      });

      // æ˜¾ç¤º/éšè—è§’è‰²å¼€å…³
      const toggleRolesBtn = document.getElementById('toggleRolesBtn');
      const toggleRolesText = document.getElementById('toggleRolesText');
      const toggleRolesTextShort = document.getElementById('toggleRolesText-short');
      const playersContainer = document.getElementById('playersContainer');
      
      // ä»localStorageè·å–çŠ¶æ€
      const rolesHidden = localStorage.getItem('rolesHidden') === 'true';
      if (rolesHidden) {
        playersContainer.classList.add('hide-roles');
        if (toggleRolesText) toggleRolesText.textContent = 'æ˜¾ç¤ºè§’è‰²';
        if (toggleRolesTextShort) toggleRolesTextShort.textContent = 'æ˜¾ç¤º';
        toggleRolesBtn.classList.add('active');
      }

      toggleRolesBtn.addEventListener('click', () => {
        const isHidden = playersContainer.classList.contains('hide-roles');
        if (isHidden) {
          playersContainer.classList.remove('hide-roles');
          if (toggleRolesText) toggleRolesText.textContent = 'éšè—è§’è‰²';
          if (toggleRolesTextShort) toggleRolesTextShort.textContent = 'éšè—';
          localStorage.setItem('rolesHidden', 'false');
          toggleRolesBtn.classList.remove('active');
        } else {
          playersContainer.classList.add('hide-roles');
          if (toggleRolesText) toggleRolesText.textContent = 'æ˜¾ç¤ºè§’è‰²';
          if (toggleRolesTextShort) toggleRolesTextShort.textContent = 'æ˜¾ç¤º';
          localStorage.setItem('rolesHidden', 'true');
          toggleRolesBtn.classList.add('active');
        }
      });
    });
  </script>
</body>
</html>